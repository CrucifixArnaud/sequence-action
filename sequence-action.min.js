// animate-sequence.js - Crucifix Arnaud (hello@crucifixarnaud.com)
// Select items in sequence, and toggle class "on"
// Doc and Download : https://github.com/CrucifixArnaud/sequence-action

/*------------------------*\
	@params
	------------------------
	
	_target    : Parent of the items to animates (ul, div, etc)
	_params (optional)	 : direction : forward - Animate from first to last child
							 											 backward - Animate from last to first child
												 duraction : Interval between each step (ms)
												 callback	 : Do what you want
	
\*------------------------*/ 

var items;var i;var animateSequence=function(e,t){items=_cleanWhitespace(e).childNodes;var t=t||{};var n=t.direction||"forward";var r=t.duration||100;var s=t.callback||null;if(n=="backward"){i=items.length-1}else{i=0}_step(n,r,function(){s()})};var _step=function(e,t,n){clearTimeout(r);if(i<items.length&&e!="backward"||i>=0&&e=="backward"){items[i].classList.toggle("on");if(e=="backward"){i--}else{i++}var r=setTimeout(function(){_step(e,t,n)},t)}else{if(n&&typeof n==="function"){n()}}};var _cleanWhitespace=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n.nodeType==3&&!/\S/.test(n.nodeValue)){e.removeChild(n);t--}if(n.nodeType==1){_cleanWhitespace(n)}}return e}